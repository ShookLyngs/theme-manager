!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash"),require("vue")):"function"==typeof define&&define.amd?define(["exports","lodash","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["themer-vue"]={},e.lodash,e.Vue)}(this,(function(e,t,n){"use strict";var r=Object.assign;function o(e){const t=String(e);return t.startsWith("--")?t:`--${t}`}function c(e,t=[],n={}){return Object.keys(e).reduce(((r,o)=>{const u=e[o],s=[...t,o];return"string"==typeof u?r[s.join("-")]=u:r=c(u,s,n),r}),n)}function u(e){const t=function(t){let n,r=function(){try{return document.querySelector(":root")||void 0}catch(e){return}}(),o=[];if(Array.isArray(t)){if(!t.length)throw new Error("'themes' must be filled");o=[...t]}else if(c=t,"[object Object]"===Object.prototype.toString.apply(c)){const{element:e,themes:n}=t;r&&(r=e),Array.isArray(o)&&(o=n)}var c;n=o[0];const u={element:r,themes:o,theme:n};return r&&s(u,o[0]),u}(e);return t.setTheme=e=>s(t,e),t}function s(e,n){if("string"==typeof n){const t=e.themes.find((e=>e.value.name===n));if(!t)return!1;n=t}const u=function(e){const{colors:t}=e.value.data;return r({},t)}(n=t.cloneDeep(n));return!!e.element&&(function(e,t){if(!e)return;const n=c(t);Object.keys(n).forEach((t=>{e.style.setProperty(o(t),n[t])}))}(e.element,u),e.themeValueUpdater instanceof Function?e.themeValueUpdater(n):e.theme.value=n.value,!0)}function i(e){return Object.keys(e).reduce(((t,n)=>(t[n]||(t[n]={}),e[n].forEach((e=>{t[n][e]=`var(${o(e)})`})),t)),{})}const a="Themer";e.createTailwindPreset=function(e){const t=e.themes.reduce(((e,t)=>{const n=t.value.data;return Object.keys(n).forEach((t=>{const r=function(e){const t=c(e);return Object.keys(t).reduce(((e,t)=>(e[t]=`var(${o(t)})`,e)),{})}(n[t]);Object.keys(r).forEach((n=>{e[t]||(e[t]=[]),e[t].includes(n)||e[t].push(n)}))})),e}),{});return{theme:{extend:r({},i(t))}}},e.createTheme=function(e){return{value:e instanceof Function?e():e}},e.createThemer=function(e){const t=u(e);return t.theme=n.ref(t.theme.value),{manager:t,install(e){e.provide(a,t),e.config.globalProperties.$Themer=t}}},e.useThemer=function(){return n.inject(a)},Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
